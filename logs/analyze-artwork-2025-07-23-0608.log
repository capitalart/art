2025-07-23 15:38:01,558 - INFO - === DreamArtMachine Lite: OpenAI Analyzer Started ===
2025-07-23 15:38:01,560 - INFO - Single-image mode: /home/art/art-processing/unanalysed-artwork/unanalysed-04/coastal-dunes-at-sunset-generate-an-aboriginal-dot-painting-of-coastal-sand-dunes-at-sunset-showing-98610d92.jpg
2025-07-23 15:38:01,571 - INFO - Aspect ratio for coastal-dunes-at-sunset-generate-an-aboriginal-dot-painting-of-coastal-sand-dunes-at-sunset-showing-98610d92.jpg: 4x5
2025-07-23 15:38:01,572 - INFO - Selected 9 mockups from 4x5-categorised for 4x5
2025-07-23 15:38:01,573 - INFO - Loaded generic text for 4x5
[SKU DEBUG] Peeking tracker file: /home/art/settings/sku_tracker.json
2025-07-23 15:38:04,512 - INFO - Optimized image saved for AI: coastal-dunes-at-sunset-generate-an-aboriginal-dot-painting-of-coastal-sand-dunes-at-sunset-showing-98610d92-OPTIMIZED.jpg (1920x2400, 1002372 bytes, Q=75)
2025-07-23 15:38:21,653 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-23 15:38:21,657 - INFO - {"provider": "openai", "messages": [{"role": "system", "content": "<image data>"}, {"role": "user", "content": "<image data>"}], "response": "```json\n{\n  \"seo_filename\": \"Coastal-Dunes-Sunset-Artwork-by-Robin-Custance-RJC-0127.jpg\",\n  \"title\": \"High Resolution Digital Dot Art Print \u2013 Aboriginal Coastal Dunes at Sunset | Robin Custance Download\",\n  \"description\": \"Australian coastal dunes art, Aboriginal dot painting, sunset digital download, Robin Custance artwork. This stunning piece captures the mesmerizing beauty of coastal sand dunes at sunset through the intricate technique of Aboriginal dot painting. The artwork features a vibra"}
2025-07-23 15:38:21,658 - INFO - {"file": "/home/art/art-processing/unanalysed-artwork/unanalysed-04/coastal-dunes-at-sunset-generate-an-aboriginal-dot-painting-of-coastal-sand-dunes-at-sunset-showing-98610d92.jpg", "user_id": "anonymous", "opt_image": "/home/art/art-processing/unanalysed-artwork/temp/coastal-dunes-at-sunset-generate-an-aboriginal-dot-painting-of-coastal-sand-dunes-at-sunset-showing-98610d92-OPTIMIZED.jpg", "size_bytes": 1002372, "size_mb": 0.96, "dimensions": "1920x2400", "time_sent": "2025-07-23T06:08:04.513836+00:00", "provider": "openai", "status": "fail", "error": "OpenAI response not valid JSON", "error_type": "fallback", "time_responded": "2025-07-23T06:08:21.658832+00:00", "duration_sec": 17.144982}
2025-07-23 15:38:21,659 - ERROR - Failed processing /home/art/art-processing/unanalysed-artwork/unanalysed-04/coastal-dunes-at-sunset-generate-an-aboriginal-dot-painting-of-coastal-sand-dunes-at-sunset-showing-98610d92.jpg: OpenAI response not valid JSON
2025-07-23 15:38:21,659 - ERROR - Traceback (most recent call last):
  File "/home/art/scripts/analyze_artwork.py", line 647, in analyze_single
    raise RuntimeError(err_msg)
RuntimeError: OpenAI response not valid JSON

nullROUTE START provider=openai file=eucalypt-woodland-open-dry-forest-generate-an-aboriginal-dot-painting-of-an-australian-eucalypt-wood-1-b3b79971.jpg
Using temporary uploaded file /home/art/art-processing/unanalysed-artwork/unanalysed-03/eucalypt-woodland-open-dry-forest-generate-an-aboriginal-dot-painting-of-an-australian-eucalypt-wood-1-b3b79971.jpg
Traceback (most recent call last):
  File "/home/art/routes/artwork_routes.py", line 207, in _run_ai_analysis
    return json.loads(result.stdout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.11/json/__init__.py", line 346, in loads
    return _default_decoder.decode(s)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.11/json/decoder.py", line 337, in decode
    obj, end = self.raw_decode(s, idx=_w(s, 0).end())
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.11/json/decoder.py", line 355, in raw_decode
    raise JSONDecodeError("Expecting value", s, err.value) from None
json.decoder.JSONDecodeError: Expecting value: line 1 column 2 (char 1)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/art/routes/artwork_routes.py", line 1643, in analyze_api
    entry = _run_ai_analysis(temp_file, provider)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/art/routes/artwork_routes.py", line 210, in _run_ai_analysis
    raise RuntimeError("AI analysis output could not be parsed.")
RuntimeError: AI analysis output could not be parsed.

ROUTE START provider=openai file=tawny-frogmouth-generate-an-aboriginal-dot-painting-of-a-tawny-frogmouth-podargus-strigoides-perched-2c7aa2df.jpg
Using temporary uploaded file /home/art/art-processing/unanalysed-artwork/unanalysed-04/tawny-frogmouth-generate-an-aboriginal-dot-painting-of-a-tawny-frogmouth-podargus-strigoides-perched-2c7aa2df.jpg
Traceback (most recent call last):
  File "/home/art/routes/artwork_routes.py", line 207, in _run_ai_analysis
    return json.loads(result.stdout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.11/json/__init__.py", line 346, in loads
    return _default_decoder.decode(s)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.11/json/decoder.py", line 337, in decode
    obj, end = self.raw_decode(s, idx=_w(s, 0).end())
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.11/json/decoder.py", line 355, in raw_decode
    raise JSONDecodeError("Expecting value", s, err.value) from None
json.decoder.JSONDecodeError: Expecting value: line 1 column 2 (char 1)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/art/routes/artwork_routes.py", line 1643, in analyze_api
    entry = _run_ai_analysis(temp_file, provider)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/art/routes/artwork_routes.py", line 210, in _run_ai_analysis
    raise RuntimeError("AI analysis output could not be parsed.")
RuntimeError: AI analysis output could not be parsed.

